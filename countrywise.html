<!DOCTYPE html>
<html lang="en">

<head>
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-160780833-1"></script>
	<script>window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag("js", new Date()); gtag("config", "UA-160780833-1"); </script>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Covid-19 App By Ankit Sharma</title>
	<link rel="stylesheet" href="skeleton.css" />
	<link rel="stylesheet" href="main.css" />
	<script src="newscript.js" defer></script>
</head>

<body>
	<div class="container">
		<nav>
			<header>
				<div class="toggler">
					<div></div>
					<div></div>
					<div></div>
				</div>
				<div class="close">
					x
				</div>
				<ul>
					<li class="title">COVID19 Data</li>
					<div class="right">
						<li> <a href="index.html">Overview</a> </li>
						<li> <a href="countrywise.html">Countrywise Data</a> </li>
						<li> <a href="datewise.html">DateWise Data</a> </li>
						<li> <a href="datavisualization.html">Data Visualizations</a> </li>
					</div>
				</ul>
			</header>
			<ul class="respul">
				<li> <a href="index.html">Overview</a> </li>
				<li> <a href="countrywise.html">Countrywise Data</a> </li>
				<li> <a href="datewise.html">DateWise Data</a> </li>
				<li> <a href="datavisualization.html">Data Visualizations</a> </li>
			</ul>
		</nav>
		<h2 class="med">Covid-19 Country Wise Data</h2>
		<div class="flex-center">
			<div class="error">
				<p class="error-message">Data Not Found</p>
				<p class="error-close">x</p>
			</div>
		</div>
		<div class="choose-country">
			<h5>Please select a country</h5>
			<select name="country" id="country">
				<option value="select_country" selected>Select Country</option>
			</select>
		</div>
		<div class="display-data">
			<div class="grid">
				<div class="card">
					<h5>Confirmed Cases</h5>
					<h3>
						<div id="confirmedCases"></div>
					</h3>
				</div>
				<div class="card">
					<h5>Recovered Cases</h5>
					<h3>
						<div id="recoveredCases"></div>
					</h3>
				</div>
				<div class="card">
					<h5>Death Cases</h5>
					<h3>
						<div id="deathCases"></div>
					</h3>
				</div>
			</div>
		</div>
	</div>
	<footer class="footer">
		<div class="container">
			<div class="center">Made with <span class="red">&hearts;</span> in India</div>
		</div>
	</footer>
	<script>document.addEventListener("DOMContentLoaded", () => { fetchApiData(); function fetchApiData() { fetch(fetchCountryUrl).then((response) => { if (!response.ok) { throw Error(response.statusText); } else { return response.json(); } }).then((data) => { response = data; setData(); }).catch((err) => setError(err)); } function setData() { if (response !== null) { var countriesData = Object.values(response["countries"]); var html = '<option value="" selected>Select Country</option>'; countriesData.forEach((country) => { html += `<option value="${country['name']}">${country['name']}</option>`; }); countrySelect.innerHTML = html; } } countrySelect.addEventListener("change", function () { if (this.value !== "") { fetchContryWiseData(this.value); } }); function fetchContryWiseData(country) { fetch("https://covid19.mathdro.id/api/countries/" + country).then((data) => { if (!data.ok) { throw Error(data["error"]); } else { return data.json(); } }).then((response) => setFigures(response)).catch((error) => setError(error)); } function setFigures(fetchedData) { var confirmedNumber = fetchedData["confirmed"]["value"]; var recoveredNumber = fetchedData["recovered"]["value"]; var deathNumber = fetchedData["deaths"]["value"]; confirmed.textContent = confirmedNumber; recovered.textContent = recoveredNumber; deaths.textContent = deathNumber; showElement(".display-data"); hideElement(".error"); } function setError(error) { if (error !== null) { errorMessage.textContent = "No Data Available"; showElement(".error"); hideElement(".display-data"); } } function showElement(element) { document.querySelector(element).style.display = "block"; } function hideElement(element) { document.querySelector(element).style.display = "none"; } errorClose.addEventListener("click", function () { hideElement(".error"); }); }); </script>
</body>

</html>