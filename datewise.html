<!DOCTYPE html>
<html lang="en">

<head>
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-160780833-1"></script>
	<script>  window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'UA-160780833-1');</script>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Covid-19 App By Ankit Sharma</title>
	<link rel="stylesheet" href="skeleton.css" />
	<link rel="stylesheet" href="main.css" />
	<link rel="stylesheet" href="https://cdn.datatables.net/1.10.20/css/jquery.dataTables.min.css">
	<!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.css"> -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"
		integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
	<script src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js" defer></script>
	<script src="newscript.js" defer></script>
	<style>
		#displayData {
			display: none;
		}

		#displayData_wrapper {
			margin-top: 4rem;
		}

		#date {
			min-width: 250px;
		}

		.choose-country h6 {
			margin-top: 1rem;
			color: #28a745;
		}

		#displayData_wrapper {
			overflow: auto;
		}

		@media (max-width: 600px) {
			.choose-country h6 {
				text-align: center;
			}
		}
	</style>
</head>

<body>
	<div class="container datewise">
		<nav>
			<header>
				<div class="toggler">
					<div></div>
					<div></div>
					<div></div>
				</div>
				<div class="close">
					x
				</div>
				<ul>
					<li class="title">COVID19 Data</li>
					<div class="right">
						<li> <a href="index.html">Overview</a> </li>
						<li> <a href="countrywise.html">Countrywise Data</a> </li>
						<li> <a href="datewise.html">DateWise Data</a> </li>
						<li> <a href="datavisualization.html">Data Visualizations</a> </li>
					</div>
				</ul>
			</header>
			<ul class="respul">
				<li> <a href="index.html">Overview</a> </li>
				<li> <a href="countrywise.html">Countrywise Data</a> </li>
				<li> <a href="datewise.html">DateWise Data</a> </li>
				<li> <a href="datavisualization.html">Data Visualizations</a> </li>
			</ul>
		</nav>
		<h2 class="med">Covid-19 Date Wise Data</h2>
		<div class="error">
			<p class="error-close">x</p>
			<p class="error-message">Data Not Found</p>
		</div>
		<div class="choose-country">
			<h5>Please select a date</h5> <input type="date" name="date" id="date">
			<h6>Type Country Name in the search box (on right) to filter data</h6>
		</div>

		<table id="displayData" class="display">
			<thead>
				<tr>
					<th>CountryRegion</th>
					<th>Last Update</th>
					<th>Confirmed</th>
					<th>Deaths</th>
					<th>Recovered</th>
				</tr>
			</thead>
			<tbody id="tableBody"> </tbody>
		</table>
	</div>
	<footer class="footer">
		<div class="container">
			<div class="center">Made with <span class="red">&hearts;</span> in India</div>
		</div>
	</footer>
	<script
		defer> const date = document.querySelector("#date"); const url = "https://covid19.mathdro.id/api/daily/"; var today = new Date(); var minDate = today.toISOString().substring(0, 10); var startDate = '2019-12-01'; $('#date').prop('max', minDate); $('#date').prop('min', startDate); $(function () { var todayDate = today.getMonth() + '-' + today.getDate() + '-' + today.getFullYear(); fetchData(todayDate); }); date.addEventListener("change", function () { var selectedDate = new Date(this.value); var formattedDate = selectedDate.getMonth() + 1 + "-" + selectedDate.getDate() + "-" + selectedDate.getFullYear(); fetchData(formattedDate); }); function fetchData(date) { fetch(url + date).then(response => { if (!response.ok) { throw Error("No Data Found for this date"); } else { return response.json(); } }).then(data => { displaydata(data); }).catch(error => { console.log(error); setError('error'); }); } function displaydata(data) { var tableData = ""; for (var i = 0; i < data.length; i++) { tableData += `<tr> <td>${data[i]["countryRegion"]}</td><td>${data[i]["lastUpdate"]}</td><td>${data[i]["confirmed"]}</td><td>${data[i]["deaths"]}</td><td>${data[i]["recovered"]}</td></tr>`; } document.getElementById("tableBody").innerHTML = tableData; drawTable(); } function drawTable() { $(document).ready(function () { $("#displayData").dataTable().fnDestroy(); $("#displayData").DataTable({ responsive: true, "autoWidth": false, "iDisplayLength": 25 }); }); $('#displayData').show(); } function setError(error) { $("#displayData").dataTable().fnDestroy(); if (error !== null) { errorMessage.textContent = "No Data Available"; showElement(".error"); hideElement("#displayData"); } } function showElement(element) { document.querySelector(element).style.display = "block"; } function hideElement(element) { document.querySelector(element).style.display = "none"; } document.querySelector('.error-close').addEventListener("click", function () { hideElement(".error"); }); </script>
</body>

</html>